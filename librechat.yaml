# OptimismAI - LibreChat configuration
# https://www.librechat.ai/docs/configuration/librechat_yaml

version: 1.2.9
cache: false

# ---- Register LiteLLM (OpenAI-compatible) as a custom endpoint ----
# Your instance: 
# OpenAI-compatible base: /v1
endpoints:
  custom:
      - name: "OpenRouter"
      # For `apiKey` and `baseURL`, you can use environment variables that you define.
      # recommended environment variables:
      apiKey: "${OPENROUTER_KEY}" # NOT OPENROUTER_API_KEY
      baseURL: "https://openrouter.ai/api/v1"
      models:
        default: ["@preset/optimism-ai"]
        fetch: true
      titleConvo: true
      titleModel: "OptimismAI"
      # Recommended: Drop the stop parameter from the request as Openrouter models use a variety of stop tokens.
      dropParams: ["stop"]
      modelDisplayLabel: "OptimismAI"
# ---- Interface / UI ----
interface:
  customWelcome: "What's On Your Mind, {{user.name}}?"
  privacyPolicy:
    externalUrl: "https://optimismai.app/privacy"
    openNewTab: true
  termsOfService:
    externalUrl: "https://optimismai.app/terms"
    openNewTab: true
      
  # Keep right panel but trim items
  sidePanel: true
  bookmarks: true
  prompts: false
  agents: false
  # hides Agent Builder/Marketplace & artifacts

  # Remove advanced knobs
  modelSelect: false
  parameters: false
  presets: false

  # Disable Code Interpreter button
  runCode: false

  # Keep web search button visible (provider is configured separately if you use it)
  webSearch: false
  fileCitations: true
  mcpServers:
    placeholder: "More Tools"

# ---- File Uploads (multimodal ON) ----
# Remove prior 'disabled: true' rules so uploads are allowed for our endpoint.
# If you need constraints (types/size), add them here per docs; otherwise omit fileConfig entirely.
# fileConfig:
#   endpoints:
#     OptimismAI:
#       # examples:
#       # accept: ["image/*", "application/pdf"]
#       # maxFiles: 5
#       # maxSizeMB: 15

 # ------- MCP Servers -------
mcpServers:
  Web Search:
    type: streamable-http
    url: "https://healthy-black-cardinal.fastmcp.app/mcp"
    serverInstructions: true
    timeout: 30000
 # ------ Agent Search Provider Setup -----
# ------  Memory / Personalization -----
memory:
  disabled: false
  personalize: true
  tokenLimit: 4000
  notableThreshold: 0.65
  validKeys:
    - "preferences"
    - "context"
    - "facts"
    - "name"
    - "family"
    - "projects"
    - "people"
    - "brands"
    - "goals"
    - "tasks"
    - "workflows"
    - "past"
    - "present"
    - "conversation"
    - "summary"
    - "other"
  messageWindowSize: 30
  agent:
    provider: "openAI"         # must be an AI Provider, not a custom endpoint name
    model: "gpt-4o-mini"       # pick any OpenAI chat model you have access to
    instructions: |
      Save concise, reusable facts such as projects, brand names, tools, tech stack, accounts, preferences, recurring goals, roles, locations, and timeframes. 
      Always save when the user explicitly says “remember / save / note / store,” and also save plans or commitments expressed in future tense (“I will…”, “we’ll…”, “let’s…”). 
      Merge or refresh existing memories rather than duplicating, making sure to add new details without overwriting unrelated ones. Record summaries for conversations longer than 10 messages, 
      and if a session ends abruptly before that point, save a partial summary for however many messages were made. 
      Save only when confidence in relevance is medium or higher. Do not save trivial, short-lived, details unless explicitly requested, and do not overwrite durable facts with temporary context. 
      Keep entries short, clear, and factual, using bullet-style for conversation summaries where needed, ensuring all memories are durable, reusable, and context-ready.
    model_parameters:
      temperature: 0.8
      max_tokens: 4096
# ---- Lock the experience to a single, preselected model ----
modelSpecs:
  enforce: false
  list:
    - name: "@preset/optimism-ai"
      label: "OptimismAI"
      default: true
      preset:
        endpoint: "OpenRouter"   # must match endpoints.custom[0].name
        model: "@preset/optimism-ai"   # or another model if that’s your choice
        modelLabel: "OptimismAI"
        mcpServers:
          - "Web Search" 
        instructions: |
          You are OptimismAI with access to a web search tool.
          Use the `web_search` tool when the user asks about current events or unknown facts.
