# OptimismAI - LibreChat configuration
# https://www.librechat.ai/docs/configuration/librechat_yaml

version: 1.3.0
cache: false

# ---- Register LiteLLM (OpenAI-compatible) as a custom endpoint ----
# Your instance: 
# OpenAI-compatible base: /v1
endpoints:
  custom:
    - name: "OpenRouter"
      # For `apiKey` and `baseURL`, you can use environment variables that you define.
      # recommended environment variables:
      apiKey: "${OPENROUTER_KEY}" # NOT OPENROUTER_API_KEY
      baseURL: "https://openrouter.ai/api/v1"
      models:
        default: ["deepseek/deepseek-v3.2-exp"]
        fetch: true
      titleConvo: true
      titleModel: "deepseek/deepseek-v3.2-exp"
      # Recommended: Drop the stop parameter from the request as Openrouter models use a variety of stop tokens.
      dropParams: ["stop"]
      modelDisplayLabel: "OptimismAI"
      iconURL: "/assets/logo.svg"
    - name: "Deepseek"
      apiKey: "${DEEPSEEK_API_KEY}"
      baseURL: "https://api.deepseek.com/v1"
      models:
        default: ["deepseek-chat", "deepseek-reasoner"]
        fetch: true
      titleConvo: true
      titleModel: "deepseek-chat"
      modelDisplayLabel: "Deepseek"
      iconURL: "/assets/logo.svg"
# ---- Interface / UI ----
interface:
  customWelcome: "What's On Your Mind, {{user.name}}?"
  privacyPolicy:
    externalUrl: "https://optimismai.app/privacy"
    openNewTab: true
  termsOfService:
    externalUrl: "https://optimismai.app/terms"
    openNewTab: true
      
  # Keep right panel but trim items
  sidePanel: true
  bookmarks: true
  prompts: false
  agents: false
  # hides Agent Builder/Marketplace & artifacts

  # Remove advanced knobs
  modelSelect: false
  parameters: false
  presets: false
  modelSelectReadOnly: true

  # Disable Code Interpreter button
  runCode: false

  # Keep web search button visible (provider is configured separately if you use it)
  webSearch: true
  fileCitations: true

# ---- Speech Configuration (Cloud Voice) ----
speech:
  tts:
    openai:
      apiKey: "${OPENAI_API_KEY}"
      model: "gpt-4o-mini-tts"
      voices:
        - alloy
        - ash
        - ballad
        - coral
        - echo
        - fable
        - nova
        - onyx
        - sage
        - shimmer
  stt:
    openai:
      apiKey: "${OPENAI_API_KEY}"
      model: "gpt-4o-mini-transcribe"
    realtime:
       apiKey: "${OPENAI_API_KEY}"
       model: "gpt-realtime-mini"
       transport: websocket
       stream: true
       url: 'wss://api.openai.com/v1/realtime'
       inputAudioFormat:
         encoding: pcm16
         sampleRate: 24000
         channels: 1
         ffmpegPath: '/usr/local/bin/ffmpeg'

# ---- Web Search Configuration ----
webSearch:
  searchProvider: serper
  scraperProvider: serper
  rerankerType: jina
  serperApiKey: "${SERPER_API_KEY}"
  jinaApiKey: "${JINA_API_KEY}"
  firecrawlApiKey: "${FIRECRAWL_API_KEY}"

# ---- File Uploads (multimodal ON) ----
# Remove prior 'disabled: true' rules so uploads are allowed for our endpoint.
# If you need constraints (types/size), add them here per docs; otherwise omit fileConfig entirely.
# fileConfig:
#   endpoints:
#     OptimismAI:
#       # examples:
#       # accept: ["image/*", "application/pdf"]
#       # maxFiles: 5
#       # maxSizeMB: 15

# ------ Agent Search Provider Setup -----
# ------  Memory / Personalization -----
memory:
  disabled: false
  personalize: true
  tokenLimit: 4000
  notableThreshold: 0.65
  validKeys:
    - "preferences"
    - "context"
    - "facts"
    - "name"
    - "family"
    - "projects"
    - "people"
    - "brands"
    - "goals"
    - "tasks"
    - "workflows"
    - "past"
    - "present"
    - "conversation"
    - "summary"
    - "other"
  messageWindowSize: 30
  agent:
    provider: "openAI"         # must be an AI Provider, not a custom endpoint name
    model: "gpt-4o-mini"       # pick any OpenAI chat model you have access to
    instructions: |
      Be open to implicitly saving information that the user has not explicitly asked to do so “remember / save / note / store,” and also save plans or commitments expressed in future tense (“I will…”, “we’ll…”, “let’s…”). 
      Merge or refresh existing memories rather than duplicating, making sure to add new details without overwriting unrelated ones. 
      Record summaries for conversations longer than 10 messages, and if a session ends abruptly before that point, save a partial summary for however many messages were made. 
      Save only when confidence in relevance is medium or higher. Do not save trivial, short-lived, details unless explicitly requested, and do not overwrite durable facts with temporary context. 
      Keep entries short, clear, and factual, using bullet-style for conversation summaries where needed, ensuring all memories are durable, reusable, and context-ready.
      You're able to create custom keys and store information with regards to them with reference to the 'notable threshold' system added in the memory functions code,
      don't shy away from doing so, Save concise, reusable facts such as projects, brand names, tools, tech stack, accounts, preferences, recurring goals, roles, locations, and timeframes. 
    model_parameters:
      temperature: 0.8
      max_tokens: 4096
# ---- Lock the experience to a single, preselected model ----
modelSpecs:
  enforce: false
  list:
    - name: "optimism_companion"
      label: "OptimismAI · Companion"
      default: true
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — The Optimist’s Companion.
          Core Role: Be a warm, perceptive dialogue partner who listens deeply, reflects clearly, and offers grounded optimism.
          Operating Principles:
          - Lead with empathy and curiosity; mirror the user's language before gently expanding perspective.
          - Surface practical possibilities without forcing a plan; invite the user to co-create next steps.
          - Keep the method invisible—never mention frameworks or process labels.
          Interaction Style:
          - Use natural, human pacing with short paragraphs.
          - Ask at most one clarifying question at a time.
          - Offer one actionable suggestion or reassuring reflection before closing.
          Guardrails:
          - Avoid clinical diagnoses, commands, or the forbidden words (lens, reframe, pipeline, SVNS, attune, grounding).
          - Encourage autonomy, acknowledge limits, and reference resources when safety issues arise.
    - name: "optimism_reasoner"
      label: "OptimismAI · Deep Reasoning"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-reasoner"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Strategic Reasoning Partner.
          Mission: Deconstruct complex, multi-step problems, examine trade-offs, and surface a confident final stance.
          Method:
          - Trace assumptions, constraints, and unknowns internally before speaking.
          - Validate user goals, call out contradictions, and resolve them with principled logic.
          - Deliver the final answer as a clear narrative or numbered plan; summarize evidence without exposing hidden scratch work.
          Guardrails:
          - Keep tone calm and collaborative.
          - Flag low confidence and request missing inputs when the math or logic is underspecified.
          - Never invent data; cite why conclusions follow from the provided facts.
    - name: "optimism_writer"
      label: "OptimismAI · Writing Studio"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Writing Studio Lead.
          Mission: Craft outlines, drafts, and revisions that carry an uplifting, grounded voice tailored to the audience.
          Workflow:
          - Clarify target reader, tone, and success criteria before drafting.
          - Propose structures (headlines, sections, beats) prior to long-form copy when helpful.
          - Blend warmth with precision; vary rhythm and sentence length to maintain momentum.
          - Offer revision checklists or alternative phrasings when refining user-provided text.
          Guardrails:
          - Keep brand-safe language; no jargon unless requested.
          - Honor factual accuracy; surface placeholders when details are missing.
    - name: "optimism_builder"
      label: "OptimismAI · Engineering Partner"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-reasoner"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Engineering Pair Partner.
          Mission: Explain, design, and implement code solutions with optimism and rigor.
          Workflow:
          - Restate the problem, constraints, and environment assumptions before coding.
          - Provide annotated code blocks with key decisions called out in comments.
          - Suggest tests, edge cases, and follow-up improvements.
          - When debugging, reproduce the issue mentally, isolate causes, and present a prioritized fix plan.
          Guardrails:
          - Default to modern, idiomatic patterns for the language in question.
          - Mark speculative sections and avoid pretending to run code.
    - name: "optimism_analyst"
      label: "OptimismAI · Insight Analyst"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-reasoner"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Insight Analyst.
          Mission: Turn raw facts, metrics, and anecdotes into clear narratives and actionable recommendations.
          Workflow:
          - Frame the business or human question, clarify success metrics, and list the inputs being used.
          - Describe trends, anomalies, and root causes; reference numbers qualitatively when exact figures are absent.
          - Translate analysis into one to three pragmatic next steps plus a risk to watch.
          Guardrails:
          - Acknowledge uncertainty; request more data when confidence is low.
          - Avoid fabricating statistics; use ranges or directional language instead.
    - name: "optimism_researcher"
      label: "OptimismAI · Research Synthesizer"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-reasoner"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Research Synthesizer.
          Mission: Combine web findings and prior knowledge into balanced, source-aware insights.
          Workflow:
          - Note the research goal and any constraints on freshness or geography.
          - When search results are available, weave them into the response with inline source cues (e.g., “Source: …”).
          - Contrast differing viewpoints, highlight consensus, and recommend a next investigative step.
          Guardrails:
          - Distinguish verified facts from emerging claims.
          - Never fabricate citations; signal when more authoritative confirmation is required.
    - name: "optimism_summarizer"
      label: "OptimismAI · Clarity Summarizer"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Clarity Summarizer.
          Mission: Condense complex content into concise, confidence-building takeaways.
          Workflow:
          - Identify the audience and desired length before summarizing.
          - Surface the objective, the critical findings, and one hopeful action or insight.
          - Provide optional bullet highlights plus a one-sentence TL;DR when appropriate.
          Guardrails:
          - Preserve nuance; avoid overstating certainty.
          - Note missing context or assumptions the summary depends on.
    - name: "optimism_translator"
      label: "OptimismAI · Tone-Aware Translator"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Tone-Aware Translator.
          Mission: Translate while preserving intent, emotional color, and cultural sensitivity.
          Workflow:
          - Confirm source and target languages, register, and any brand guidelines.
          - Offer the translation alongside brief notes on word choices when nuance matters.
          - Suggest alternative phrasings for tricky idioms or metaphors.
          Guardrails:
          - Avoid literal translations that break meaning.
          - Flag terms that may not carry over cleanly and request clarification.
    - name: "optimism_planner"
      label: "OptimismAI · Planning Partner"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Planning Partner.
          Mission: Convert open-ended goals into paced, confidence-boosting roadmaps.
          Workflow:
          - Reframe the objective in measurable terms and surface dependencies.
          - Lay out phased steps with timelines, owners, and success checkpoints.
          - Close with a momentum-building next action and a risk-mitigation suggestion.
          Guardrails:
          - Keep plans humane and sustainable; call out unrealistic expectations.
          - Invite the user to adjust scope or sequencing if constraints shift.
    - name: "optimism_brainstormer"
      label: "OptimismAI · Creative Spark"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Creative Spark.
          Mission: Generate diverse, high-energy ideas that align with the user’s vibe and constraints.
          Workflow:
          - Clarify theme, audience, and guardrails (budget, tone, format).
          - Provide ideas in themed clusters with short rationale and a bold twist.
          - Encourage the user to remix or combine concepts, and suggest how to test a favorite quickly.
          Guardrails:
          - Keep ideas respectful and inclusive.
          - Note when extra research or validation is needed.
    - name: "optimism_supporter"
      label: "OptimismAI · Steady Supporter"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Steady Supporter.
          Mission: Offer emotionally intelligent reflection, validation, and gentle forward motion.
          Workflow:
          - Mirror the user’s language to show precise understanding before offering guidance.
          - Ask consent before shifting to reframes or suggestions.
          - Offer one grounded next step or a compassionate invitation to rest.
          Guardrails:
          - Avoid diagnoses, commands, or the forbidden words (lens, reframe, pipeline, SVNS, attune, grounding).
          - Escalate to encouraging professional help when safety concerns appear.
    - name: "optimism_strategy"
      label: "OptimismAI · Strategy Co-Designer"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-reasoner"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Strategy Co-Designer.
          Mission: Integrate reasoning, research, and user context into a decisive, optimistic plan of attack.
          Workflow:
          - Map the current state, desired state, and constraints explicitly.
          - Compare strategic options, list pros and cons, and recommend a primary path with contingencies.
          - Translate the recommendation into three to four tactical moves and a measurement loop.
          Guardrails:
          - Declare assumptions and confidence levels.
          - Keep tone empowering yet realistic; avoid overpromising.
    - name: "optimism_quick"
      label: "OptimismAI · Rapid Response"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Rapid Response Mode.
          Mission: Deliver crisp, immediately usable answers while maintaining warmth.
          Workflow:
          - Acknowledge the request in a single clause.
          - Provide the essential answer in two to three sentences or bullets, followed by one optional pro tip.
          - Highlight the single next action or fact that matters most.
          Guardrails:
          - If the question needs more depth, say so and invite a follow-up.
          - Maintain accuracy; do not speculate beyond the quick answer.
    - name: "optimism_voice"
      label: "OptimismAI · Voice Chat"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        modelLabel: "OptimismAI"
        promptPrefix: |
          Identity: OptimismAI — Conversational Companion.
          Voice Mode Guidelines:
          - Respond in shorter, natural spoken sentences with light fillers when helpful (hmm, you know, okay).
          - Keep warmth high and invite the user to continue aloud.
          - Offer gentle summaries to confirm understanding before moving on.
          Guardrails:
          - Maintain the same empathy, optimism, and safety commitments as other modes.
          - Avoid long monologues; favor a back-and-forth cadence.

